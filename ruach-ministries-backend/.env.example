# ==============================================================================
# STRAPI BACKEND ENVIRONMENT VARIABLES
# ==============================================================================

# ------------------------------------------------------------------------------
# Core Strapi Configuration
# ------------------------------------------------------------------------------

NODE_ENV=development
HOST=0.0.0.0
PORT=1337

# Public URLs
API_URL=http://localhost:1337
PUBLIC_URL=http://localhost:3000

# ------------------------------------------------------------------------------
# Security & Authentication
# ------------------------------------------------------------------------------

# JWT Secret (REQUIRED)
# CRITICAL: Must be a cryptographically secure random string (32+ characters)
# Generate using: openssl rand -base64 32
# NEVER commit the actual secret to version control
# NEVER use the same secret across environments
JWT_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Admin JWT Secret (REQUIRED)
# Separate from user JWT for admin panel authentication
# Generate using: openssl rand -base64 32
ADMIN_JWT_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# App Keys (REQUIRED)
# Comma-separated list of app encryption keys (minimum 2 keys)
# Generate using: openssl rand -base64 32 (run twice)
# Example: "key1,key2"
APP_KEYS=REPLACE_WITH_KEY1,REPLACE_WITH_KEY2

# API Token Salt (REQUIRED)
# Used for API token generation
# Generate using: openssl rand -base64 32
API_TOKEN_SALT=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Transfer Token Salt (REQUIRED)
# Used for transfer token generation
# Generate using: openssl rand -base64 32
TRANSFER_TOKEN_SALT=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Cookie Security (RECOMMENDED)
# Controls whether refresh tokens are sent over HTTPS only
# - Set to "true" in production (requires HTTPS)
# - Set to "false" in local development (HTTP allowed)
# - If not set, defaults to NODE_ENV=production check
# IMPORTANT: In production, ensure this is set to "true" or NODE_ENV is "production"
COOKIE_SECURE=false

# Revalidation Secret (REQUIRED if using Next.js revalidation)
# Shared secret between Strapi and Next.js for on-demand ISR
# Must match STRAPI_REVALIDATE_SECRET in Next.js .env
# Generate using: openssl rand -base64 32
REVALIDATE_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Preview Feature Configuration (REQUIRED for Preview feature)
# Client URL - Frontend application URL for preview feature
# Must match the domain where your Next.js app is running
CLIENT_URL=http://localhost:3000

# Preview Secret (REQUIRED for Next.js draft mode)
# Shared secret between Strapi and Next.js for preview authentication
# Must match PREVIEW_SECRET in Next.js .env
# Generate using: openssl rand -base64 32
PREVIEW_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------

# SQLite (Development - Default)
DATABASE_CLIENT=sqlite
DATABASE_FILENAME=.tmp/data.db

# PostgreSQL (Production - Recommended)
# Uncomment and configure for production use:
# DATABASE_CLIENT=postgres
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_NAME=strapi
# DATABASE_USERNAME=strapi
# DATABASE_PASSWORD=SECURE_PASSWORD
# DATABASE_SSL=false

# ------------------------------------------------------------------------------
# Redis Configuration (Production Recommended)
# ------------------------------------------------------------------------------

# Standard Redis Connection (for Bull queue, caching)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
# Or use Redis URL:
# REDIS_URL=redis://localhost:6379

# Upstash Redis (Serverless, for token storage & rate limiting)
# Get credentials from: https://upstash.com/
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ------------------------------------------------------------------------------
# Email Configuration
# ------------------------------------------------------------------------------

# Email Provider (Resend recommended)
EMAIL_PROVIDER=resend
EMAIL_PROVIDER_OPTIONS_API_KEY=
# Or use env var:
RESEND_API_KEY=

# Default email sender
EMAIL_DEFAULT_FROM=noreply@example.com
EMAIL_DEFAULT_REPLY_TO=hello@example.com

# ------------------------------------------------------------------------------
# Logging & Monitoring
# ------------------------------------------------------------------------------

# Log Level: error, warn, info, debug
LOG_LEVEL=info

# Logtail (BetterStack) - Production logging
LOGTAIL_SOURCE_TOKEN=

# ------------------------------------------------------------------------------
# Social Media Publishing (Ruach Publisher Plugin)
# ------------------------------------------------------------------------------

# YouTube Configuration
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=
YOUTUBE_REDIRECT_URI=http://localhost:1337/api/youtube/callback
YOUTUBE_REFRESH_TOKEN=
YOUTUBE_DEFAULT_PRIVACY=public

# Facebook Configuration
FACEBOOK_PAGE_ACCESS_TOKEN=
FACEBOOK_PAGE_ID=
FACEBOOK_API_VERSION=v18.0

# Instagram Configuration (uses Facebook Graph API)
INSTAGRAM_BUSINESS_ACCOUNT_ID=
# Uses FACEBOOK_PAGE_ACCESS_TOKEN from above

# X (Twitter) Configuration
X_API_BEARER_TOKEN=

# Truth Social Configuration
TRUTH_SOCIAL_ACCESS_TOKEN=

# Patreon Configuration
PATREON_ACCESS_TOKEN=
PATREON_CAMPAIGN_ID=

# Locals Configuration
LOCALS_AUTH_TOKEN=

# Rumble Configuration
RUMBLE_API_KEY=

# ------------------------------------------------------------------------------
# Payment Processing (Stripe)
# ------------------------------------------------------------------------------

STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Role names for subscription management
STRIPE_ACTIVE_ROLE_NAME=Partner
STRIPE_FALLBACK_ROLE_NAME=Authenticated

# ------------------------------------------------------------------------------
# File Upload & Storage
# ------------------------------------------------------------------------------

# Cloudflare R2 / S3-Compatible Storage
# Configure in Strapi admin panel or via plugins config

# ------------------------------------------------------------------------------
# CORS Configuration
# ------------------------------------------------------------------------------

# Allowed origins (comma-separated)
# Example: http://localhost:3000,https://yoursite.com
# Leave empty to use default Next.js origin

# ------------------------------------------------------------------------------
# Admin Panel Configuration
# ------------------------------------------------------------------------------

# Admin panel URL (if different from API_URL)
# ADMIN_URL=http://localhost:1337/admin

# ------------------------------------------------------------------------------
# AI & RECOMMENDATIONS (Phase 4)
# ------------------------------------------------------------------------------

# API Keys (replace with production secrets)
OPENAI_API_KEY=sk-proj-REPLACE_ME
ANTHROPIC_API_KEY=sk-ant-REPLACE_ME

# Frontend Feature Flags (mirrors Next.js .env.production)
NEXT_PUBLIC_AI_ASSISTANT_ENABLED=true
NEXT_PUBLIC_RECOMMENDATIONS_ENABLED=true
NEXT_PUBLIC_SEMANTIC_SEARCH_ENABLED=false
AI_ASSISTANT_MAX_HISTORY=20
RECOMMENDATIONS_CACHE_TTL=3600

# ------------------------------------------------------------------------------
# Production Checklist
# ------------------------------------------------------------------------------
# Before deploying to production:
#
# [ ] Generate unique JWT_SECRET (32+ characters)
# [ ] Generate unique ADMIN_JWT_SECRET (32+ characters)
# [ ] Generate unique APP_KEYS (2+ keys)
# [ ] Generate unique API_TOKEN_SALT (32+ characters)
# [ ] Generate unique TRANSFER_TOKEN_SALT (32+ characters)
# [ ] Set COOKIE_SECURE=true (or ensure NODE_ENV=production)
# [ ] Configure production database (PostgreSQL recommended)
# [ ] Set up Redis/Upstash for distributed caching & rate limiting
# [ ] Configure email provider (Resend recommended)
# [ ] Set up Logtail for production logging
# [ ] Review CORS configuration
# [ ] Test authentication flows
# [ ] Enable HTTPS on hosting platform
# [ ] Set up database backups
# [ ] Configure file storage (R2/S3)
# [ ] Review rate limiting settings
