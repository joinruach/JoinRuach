# Core URLs
NEXTAUTH_URL=http://localhost:3000
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# NextAuth Secret Key
# CRITICAL: Must be a cryptographically secure random string
# Minimum length: 32 characters (recommended: 64+ characters)
# Generate using: openssl rand -base64 32
# Or online: https://generate-secret.vercel.app/32
# NEVER use the same secret across environments (dev/staging/production)
# NEVER commit the actual secret to version control
# Example: openssl rand -base64 48
NEXTAUTH_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_48

# Strapi
NEXT_PUBLIC_STRAPI_URL=http://localhost:1337
STRAPI_URL=http://localhost:1337

# Strapi Revalidation Secret
# Generate using: openssl rand -base64 32
# Must match REVALIDATE_SECRET in Strapi backend
STRAPI_REVALIDATE_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Preview Feature Configuration
# Preview Secret - Must match PREVIEW_SECRET in Strapi backend
# Generate using: openssl rand -base64 32
PREVIEW_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32
STRAPI_EMAIL_CONFIRM_REDIRECT=
STRAPI_API_TOKEN=
STRAPI_CONTACT_TOKEN=
STRAPI_VOLUNTEER_TOKEN=
STRAPI_TESTIMONY_TOKEN=
STRAPI_CONTACT_COLLECTION=contact-submissions
STRAPI_VOLUNTEER_COLLECTION=volunteer-signups
STRAPI_TESTIMONY_COLLECTION=testimonies

# Analytics
NEXT_PUBLIC_PLAUSIBLE_DOMAIN=

# ConvertKit (newsletter)
NEXT_PUBLIC_CONVERTKIT_EMBED_HTML=
NEXT_PUBLIC_CONVERTKIT_FORM_ACTION=
NEXT_PUBLIC_CONVERTKIT_FORM_METHOD=post
NEXT_PUBLIC_CONVERTKIT_FORM_TARGET=_blank
NEXT_PUBLIC_CONVERTKIT_FORM_ID=
NEXT_PUBLIC_CONVERTKIT_API_KEY=
CONVERTKIT_API_SECRET=

# Giving / Donations
NEXT_PUBLIC_GIVEBUTTER_URL=
NEXT_PUBLIC_GIVEBUTTER_EMBED_HTML=
NEXT_PUBLIC_GIVEBUTTER_GOAL_ID=
NEXT_PUBLIC_GIVEBUTTER_REGISTRATION_URL=
NEXT_PUBLIC_GIVEBUTTER_REGISTRATION_EMBED=
NEXT_PUBLIC_MEMBERFUL_URL=
NEXT_PUBLIC_OUTREACH_GIVE_URL=

# Contact + Forms
NEXT_PUBLIC_CONTACT_STORIES_EMAIL=
NEXT_PUBLIC_CONTACT_EVENTS_EMAIL=
NEXT_PUBLIC_CONTACT_PARTNERS_EMAIL=
NEXT_PUBLIC_TESTIMONY_FORM_URL=

# SendGrid Email (for prayer requests and notifications)
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=
EMAIL_FROM="Ruach Ministries <hello@joinruach.org>"
PRAYER_TEAM_EMAIL=hello@joinruach.org
SITE_URL=https://joinruach.org

# Content
NEXT_PUBLIC_BOARD_JSON=
NEXT_PUBLIC_ABOUT_STORY_IMAGE=

# Social links
NEXT_PUBLIC_SOCIAL_INSTAGRAM=
NEXT_PUBLIC_SOCIAL_YOUTUBE=
NEXT_PUBLIC_SOCIAL_FACEBOOK=
NEXT_PUBLIC_SOCIAL_SPOTIFY=

# Moderation
MODERATOR_EMAILS=

# Redis (Upstash) - Rate Limiting & Telegram Deduplication
# Used for: Rate limiting API endpoints, Telegram update deduplication
# Get from: https://console.upstash.com/redis
# Telegram deduplication: Prevents double-processing on webhook retries (5min TTL)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ------------------------------------------------------------------------------
# AI Features (Phase 4)
# ------------------------------------------------------------------------------

# OpenAI API Key (for embeddings and transcription)
# Get from: https://platform.openai.com/api-keys
# Used for: Semantic search embeddings, Whisper transcription
OPENAI_API_KEY=sk-proj-...

# Anthropic API Key (for AI assistant)
# Get from: https://console.anthropic.com/
# Used for: Ruach AI Assistant chat
ANTHROPIC_API_KEY=sk-ant-...

# AI Feature Flags
# Enable/disable AI features in production
NEXT_PUBLIC_AI_ASSISTANT_ENABLED=true
NEXT_PUBLIC_SEMANTIC_SEARCH_ENABLED=true
NEXT_PUBLIC_RECOMMENDATIONS_ENABLED=true

# AI Configuration
AI_ASSISTANT_MAX_HISTORY=20
RECOMMENDATIONS_CACHE_TTL=3600
TRANSCRIPTION_AUTO_QUEUE=false

# AI Gateway (optional - for centralized AI with rate limiting and cost tracking)
# If not set, /api/chat uses direct Anthropic API calls
# Set these to enable the AI Gateway service
AI_GATEWAY_URL=http://localhost:4000
AI_GATEWAY_SHARED_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# ------------------------------------------------------------------------------
# Telegram Bot Integration (Ruach Capture System)
# ------------------------------------------------------------------------------

# Telegram Bot Token
# Get from @BotFather in Telegram after creating a bot
# Format: 1234567890:AAH_xxxxxxxxxxxxxxxxxxxxxxxx
TELEGRAM_BOT_TOKEN=1234567890:AAH_xxxxxxx

# Telegram Webhook Secret
# Generate using: openssl rand -base64 32
# This validates that webhook requests are actually from Telegram
TELEGRAM_WEBHOOK_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Capture API Secret (Recommended for Production)
# Generate using: openssl rand -base64 32
# Protects /api/capture endpoint from unauthorized access
# Required when calling from Telegram bot or iPhone shortcuts
CAPTURE_SECRET=REPLACE_WITH_RANDOM_STRING_FROM_openssl_rand_base64_32

# Public App URL (Required for Telegram webhook)
# Your deployed Next.js URL (must be HTTPS in production)
# Used by Telegram to send updates to /api/telegram/webhook
NEXT_PUBLIC_APP_URL=https://yourdomain.com

# Telegram User ID Whitelist (Required in Production)
# Comma-separated list of Telegram user IDs allowed to use the bot
# Get your ID by sending /whoami to your bot or use @userinfobot
# Example: 123456789,987654321
# Production: REQUIRED (bot rejects all if not set)
# Development: Optional (allows all if not set)
# Parsed once at startup for performance
TELEGRAM_ALLOWED_USER_IDS=

# Telegram Require Whitelist (Production Safety Override)
# Set to "true" to ALWAYS require whitelist, regardless of NODE_ENV
# Prevents accidental public exposure if NODE_ENV is not set correctly
# Recommended: true for production deployments
TELEGRAM_REQUIRE_WHITELIST=true

# Telegram Require Redis (Fail-Closed Mode)
# Set to "true" to reject all requests when Redis is unavailable
# When false (default): Graceful degradation (dedup/rate-limit disabled if Redis down)
# When true: Max security (reject all if Redis down)
# Recommended: false for staging, true for paranoid production
TELEGRAM_REQUIRE_REDIS=false

# Telegram Silent Block (Optional, Recommended for Security)
# Set to "true" to silently ignore unauthorized users instead of replying
# This prevents revealing that the bot is restricted
# Default: false (sends "Unauthorized" message)
TELEGRAM_SILENT_BLOCK=true

# Log Stack Traces (Production Safety)
# Set to "true" to log error stack traces in production
# Default: false (prevents info leaks)
# Only enable for debugging production issues
LOG_STACKS=false